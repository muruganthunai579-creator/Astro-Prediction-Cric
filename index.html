<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Panchapakshi Football Predictor</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <style>
    :root{
      --home-main:#22c55e;
      --away-main:#0ea5e9;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:#020617;
      color:#e5e7eb;
    }
    .wrap{
      max-width:900px;
      margin:0 auto;
      padding:12px;
    }
    h1{
      font-size:16px;
      letter-spacing:0.25em;
      text-transform:uppercase;
      color:#38bdf8;
      margin:4px 0 10px;
      text-align:center;
    }
    .sub{
      font-size:11px;
      text-align:center;
      color:#9ca3af;
      margin-bottom:10px;
    }
    .card{
      background:radial-gradient(circle at top,#0b1120,#020617 60%);
      border-radius:18px;
      border:1px solid #1f2937;
      padding:12px;
      margin-bottom:12px;
      box-shadow:0 18px 40px rgba(15,23,42,0.8);
    }
    .title-sm{
      font-size:11px;
      text-transform:uppercase;
      letter-spacing:0.22em;
      color:#6b7280;
      margin-bottom:6px;
    }
    label{
      display:block;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:0.18em;
      color:#6b7280;
      margin-bottom:3px;
    }
    input,select{
      width:100%;
      padding:8px 10px;
      border-radius:10px;
      border:1px solid #1f2937;
      background:#020617;
      color:#e5e7eb;
      font-size:13px;
      margin-bottom:10px;
    }
    input:focus,select:focus{
      outline:none;
      border-color:#22c55e;
      box-shadow:0 0 0 1px #22c55e;
    }
    .row{display:flex;gap:8px;flex-wrap:wrap;}
    .row>div{flex:1 1 0;}
    button{
      width:100%;
      padding:9px;
      border:none;
      border-radius:999px;
      text-transform:uppercase;
      letter-spacing:0.18em;
      font-size:11px;
      font-weight:600;
      color:#0b1120;
      cursor:pointer;
      margin-bottom:4px;
    }
    .btn-main{
      background:linear-gradient(90deg,#22c55e,#a3e635);
      box-shadow:0 0 25px rgba(34,197,94,0.7);
      color:#001;
    }
    .btn-secondary{
      background:linear-gradient(90deg,#0ea5e9,#6366f1);
      box-shadow:0 0 25px rgba(56,189,248,0.7);
      color:#f9fafb;
    }
    button:active{transform:scale(.97);}
    .tiny{
      font-size:11px;
      color:#9ca3af;
      line-height:1.5;
      margin-top:4px;
    }
    .tag{
      display:inline-block;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:0.15em;
      padding:2px 8px;
      border-radius:999px;
      margin-right:6px;
    }
    .tag-day{background:#022c22;color:#6ee7b7;}
    .tag-team{background:#111827;color:#60a5fa;}
    .tag-result{background:#1f2937;color:#facc15;}
    .winner{
      font-weight:700;
      color:#22c55e;
    }
    .danger{color:#f97316;}
    .draw{color:#facc15;font-weight:600;}
    .bar-wrap{
      width:100%;
      height:16px;
      border-radius:999px;
      overflow:hidden;
      border:1px solid #111827;
      background:#020617;
      margin:6px 0;
      position:relative;
      display:flex;
    }
    .bar-home{background:linear-gradient(90deg,var(--home-main),#bbf7d0);}
    .bar-away{background:linear-gradient(90deg,var(--away-main),#bfdbfe);}
    .bar-label{
      position:absolute;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%);
      font-size:10px;
      font-weight:600;
      color:#f9fafb;
      text-shadow:0 1px 2px rgba(0,0,0,.8);
      white-space:nowrap;
    }
    .result-line{font-size:12px;margin:2px 0;}
  </style>
</head>
<body>
<div class="wrap">
  <h1>PANCHAPAKSHI · FOOTBALL</h1>
  <div class="sub">Pure Panchapakshi · No astrology mix · Football only</div>

  <!-- MATCH INPUT -->
  <div class="card">
    <div class="title-sm">Step 1 · Match Details</div>
    <div class="row">
      <div>
        <label>Home Team</label>
        <input id="homeTeam" placeholder="Liverpool" />
      </div>
      <div>
        <label>Away Team</label>
        <input id="awayTeam" placeholder="Manchester City" />
      </div>
    </div>

    <div class="row">
      <div>
        <label>Date</label>
        <input id="matchDate" type="date" />
      </div>
      <div>
        <label>Kickoff Time (Local)</label>
        <input id="kickoff" type="time" value="20:00" />
      </div>
      <div>
        <label>Format</label>
        <select id="format">
          <option value="league">League / 90 min</option>
          <option value="cup">Cup Knockout</option>
          <option value="ucl">UCL / UEL</option>
        </select>
      </div>
    </div>

    <div class="row">
      <div>
        <label>Location (City · Country)</label>
        <select id="location">
          <option value="Liverpool">Liverpool · England</option>
          <option value="Manchester">Manchester · England</option>
          <option value="London">London · England</option>
          <option value="Madrid">Madrid · Spain</option>
          <option value="Barcelona">Barcelona · Spain</option>
          <option value="Munich">Munich · Germany</option>
          <option value="Dortmund">Dortmund · Germany</option>
          <option value="Milan">Milan · Italy</option>
          <option value="Turin">Turin · Italy</option>
          <option value="Paris">Paris · France</option>
          <option value="Lisbon">Lisbon · Portugal</option>
          <option value="Amsterdam">Amsterdam · Netherlands</option>
          <option value="Istanbul">Istanbul · Turkey</option>
          <option value="Riyadh">Riyadh · Saudi Arabia</option>
          <option value="Doha">Doha · Qatar</option>
          <option value="Mumbai">Mumbai · India</option>
          <option value="Kolkata">Kolkata · India</option>
          <option value="Buenos Aires">Buenos Aires · Argentina</option>
          <option value="Rio de Janeiro">Rio de Janeiro · Brazil</option>
          <option value="New York">New York · USA</option>
        </select>
      </div>
      <div>
        <label>Paksha</label>
        <select id="paksha">
          <option value="shukla">Shukla</option>
          <option value="krishna">Krishna</option>
        </select>
      </div>
      <div>
        <label>Day Ruling Bird (Auto)</label>
        <input id="dayBird" readonly />
      </div>
    </div>

    <div class="title-sm" style="margin-top:6px;">Step 2 · Team Birds (27 Nakshatra base – summary only)</div>
    <div class="row">
      <div>
        <label>Home Team Bird</label>
        <select id="homeBird">
          <option value="">Select</option>
          <option>Vulture</option>
          <option>Owl</option>
          <option>Crow</option>
          <option>Cock</option>
          <option>Peacock</option>
        </select>
      </div>
      <div>
        <label>Away Team Bird</label>
        <select id="awayBird">
          <option value="">Select</option>
          <option>Vulture</option>
          <option>Owl</option>
          <option>Crow</option>
          <option>Cock</option>
          <option>Peacock</option>
        </select>
      </div>
    </div>

    <div class="row" style="margin-top:2px;">
      <div>
        <button class="btn-secondary" onclick="autoSetPaksha()">Auto Paksha (Today)</button>
      </div>
      <div>
        <button class="btn-main" onclick="runPrediction()">⚡ Run Panchapakshi Prediction</button>
      </div>
    </div>

    <div id="dayInfo" class="tiny"></div>
  </div>

  <!-- RESULT CARD -->
  <div class="card" id="resultCard" style="display:none;">
    <div class="title-sm">Match Result · Panchapakshi Only</div>

    <div id="basicLine" class="tiny"></div>

    <div id="strengthBar"></div>

    <div class="result-line" id="winnerLine"></div>
    <div class="result-line" id="drawLine"></div>
    <div class="result-line" id="scoreLine"></div>

    <div class="tiny" id="activityLine"></div>
  </div>
</div>

<script>
/* ---------- Panchapakshi Tables ---------- */
const BIRD_PLANETS = {
  shukla: {
    Vulture: ['Jupiter','Saturn'],
    Owl:     ['Sun','Venus'],
    Crow:    ['Moon'],
    Cock:    ['Mars'],
    Peacock: ['Mercury']
  },
  krishna: {
    Vulture: ['Mars'],
    Owl:     ['Moon'],
    Crow:    ['Sun'],
    Cock:    ['Jupiter','Saturn'],
    Peacock: ['Mercury','Venus']
  }
};
const BIRDS = ['Vulture','Owl','Crow','Cock','Peacock'];
const DAY_PLANETS = ['Sun','Moon','Mars','Mercury','Jupiter','Venus','Saturn'];

function deriveRulingBirds(paksha){
  const map=BIRD_PLANETS[paksha], arr=[];
  for(let d=0;d<7;d++){
    const planet=DAY_PLANETS[d];
    let chosen='Vulture';
    for(const bird of BIRDS){
      const list=map[bird]||[];
      if(list.includes(planet)){chosen=bird;break;}
    }
    arr.push(chosen);
  }
  return arr;
}
const RULING_BIRDS = {
  shukla: deriveRulingBirds('shukla'),
  krishna: deriveRulingBirds('krishna')
};

const FRIENDLY_BIRDS = {
  Vulture: ['Owl','Cock'],
  Owl:     ['Vulture','Peacock'],
  Crow:    ['Peacock','Cock'],
  Cock:    ['Vulture','Crow'],
  Peacock: ['Owl','Crow']
};
const ENEMY_BIRDS = {
  Vulture: ['Peacock','Crow'],
  Owl:     ['Crow','Cock'],
  Crow:    ['Vulture','Owl'],
  Cock:    ['Peacock','Owl'],
  Peacock: ['Vulture','Cock']
};

function timeToMins(t){
  if(!t)return 0;
  const [h,m]=t.split(':').map(Number);
  return h*60+m;
}

/* simple activity cycle over 24h → Rule/Eat/Walk/Sleep/Die */
const ACT_SEQ = ['Rule','Eat','Walk','Sleep','Die'];
function getActivityFromTime(mins){
  const slot = Math.floor((mins % 1440) / (1440/5)); // 0..4
  return ACT_SEQ[slot];
}

/* moon age → auto paksha today */
function moonAge(date){
  const year=date.getUTCFullYear();
  const month=date.getUTCMonth()+1;
  const day=date.getUTCDate();
  let yy = year - Math.floor((12 - month)/10);
  let mm = month + 9;
  if(mm>=12)mm-=12;
  const k1=Math.floor(365.25*(yy+4712));
  const k2=Math.floor(30.6*mm+0.5);
  const k3=Math.floor(Math.floor((yy/100)+49)*0.75)-38;
  const jd=k1+k2+day+59-k3;
  const ip=(jd-2451550.1)/29.530588853;
  const frac=ip-Math.floor(ip);
  return frac*29.530588853;
}
function autoSetPaksha(){
  const d=new Date();
  const age=moonAge(d);
  const paksha = age < 14.765 ? 'shukla':'krishna';
  document.getElementById('paksha').value=paksha;
  updateDayInfo();
}

/* ---------- Strength calc ---------- */
function relationScore(teamBird, dayBird){
  if(!teamBird||!dayBird) return 0;
  if(teamBird===dayBird) return 3;              // ruling same
  if(FRIENDLY_BIRDS[dayBird]?.includes(teamBird)) return 2; // friendly
  if(ENEMY_BIRDS[dayBird]?.includes(teamBird)) return 0;    // enemy
  return 1; // neutral
}

function formatBoost(fmt){
  if(fmt==='ucl')return 1.15;
  if(fmt==='cup')return 1.1;
  return 1.0;
}

/* ---------- UI helpers ---------- */
function updateDayInfo(){
  const dateStr=document.getElementById('matchDate').value;
  const paksha=document.getElementById('paksha').value;
  const dayInfoEl=document.getElementById('dayInfo');
  const dayBirdEl=document.getElementById('dayBird');

  if(!dateStr){
    dayInfoEl.textContent="Select match date – day ruling bird, friendly & enemy birds will show here.";
    dayBirdEl.value="";
    return;
  }
  const d=new Date(dateStr);
  const dayIdx=d.getDay();
  const dayBird=RULING_BIRDS[paksha][dayIdx];
  dayBirdEl.value=dayBird;

  const friendly = FRIENDLY_BIRDS[dayBird] || [];
  const enemy = ENEMY_BIRDS[dayBird] || [];

  dayInfoEl.innerHTML =
    `<span class="tag tag-day">Day</span>`+
    `Ruling Bird: <span class="winner">${dayBird}</span> · `+
    `Friendly: <span style="color:#22c55e;font-weight:600;">${friendly.join(', ')||'-'}</span> · `+
    `Enemy: <span class="danger">${enemy.join(', ')||'-'}</span>`;
}

/* ---------- Main prediction ---------- */
function runPrediction(){
  const home = document.getElementById('homeTeam').value.trim() || "Home";
  const away = document.getElementById('awayTeam').value.trim() || "Away";
  const dateStr = document.getElementById('matchDate').value;
  const kickoff = document.getElementById('kickoff').value;
  const paksha = document.getElementById('paksha').value;
  const location = document.getElementById('location').value;
  const fmt = document.getElementById('format').value;
  const homeBird = document.getElementById('homeBird').value;
  const awayBird = document.getElementById('awayBird').value;

  if(!dateStr){alert("Match date set pannunga.");return;}
  if(!homeBird || !awayBird){alert("Both team birds select pannunga.");return;}

  const d=new Date(dateStr);
  const dayIdx=d.getDay();
  const dayBird=RULING_BIRDS[paksha][dayIdx];
  updateDayInfo();

  const baseHome = relationScore(homeBird,dayBird);
  const baseAway = relationScore(awayBird,dayBird);

  const fmtBoost = formatBoost(fmt);
  let hScore = baseHome * fmtBoost;
  let aScore = baseAway * fmtBoost;

  /* little tweak: home advantage */
  hScore *= 1.07;

  const total = hScore+aScore || 1;
  let hPct = (hScore/total)*100;
  let aPct = 100-hPct;

  /* clamp: 30–70 rule lock */
  hPct = Math.max(30,Math.min(70,hPct));
  aPct = 100-hPct;

  const diff = Math.abs(hPct-aPct);

  let winnerText, drawText;
  if(diff<=4){
    winnerText = `Overall Winner: <span class="draw">Very tight – Draw side</span>`;
    drawText = `Draw: <span class="draw">YES (birds almost equal)</span>`;
  }else if(hPct>aPct){
    winnerText = `Overall Winner: <span class="winner">${home}</span>`;
    drawText = `Draw: <span>${diff<=7 ? 'Possible' : 'NO (home bird clearly stronger)'}</span>`;
  }else{
    winnerText = `Overall Winner: <span class="winner">${away}</span>`;
    drawText = `Draw: <span>${diff<=7 ? 'Possible' : 'NO (away bird clearly stronger)'}</span>`;
  }

  /* Correct score suggestion – base on strength & activity */
  const koMins = timeToMins(kickoff);
  const activity = getActivityFromTime(koMins); // Rule/Eat/Walk/Sleep/Die

  let scoreText="";
  if(diff<=4){
    scoreText = "Correct Score (lock): 1 – 1 or 2 – 2 (balanced birds).";
  }else if(diff<=8){
    if(hPct>aPct){
      scoreText = "Correct Score (lock): 2 – 1 or 1 – 0 to "+home+".";
    }else{
      scoreText = "Correct Score (lock): 1 – 2 or 0 – 1 to "+away+".";
    }
  }else{
    if(hPct>aPct){
      scoreText = "Correct Score (lock): 3 – 1 or 2 – 0 to "+home+".";
    }else{
      scoreText = "Correct Score (lock): 1 – 3 or 0 – 2 to "+away+".";
    }
  }

  const actLine =
    `Activity (kickoff): <b>${activity}</b> – Rule/Eat = high goal zone, `+
    `Sleep/Die = under-goals tendency.`;

  /* Render */
  document.getElementById('resultCard').style.display="block";
  document.getElementById('basicLine').innerHTML =
    `<span class="tag tag-team">Match</span>`+
    `${home} vs ${away} · ${location} · Kickoff (local): ${kickoff}`;

  const bar =
    `<div class="bar-wrap">
       <div class="bar-home" style="width:${hPct}%;"></div>
       <div class="bar-away" style="width:${aPct}%;"></div>
       <div class="bar-label">${home} ${hPct.toFixed(1)}% · ${away} ${aPct.toFixed(1)}%</div>
     </div>`;
  document.getElementById('strengthBar').innerHTML = bar;

  document.getElementById('winnerLine').innerHTML =
    `<span class="tag tag-result">Winner</span> ${winnerText}`;
  document.getElementById('drawLine').innerHTML =
    `<span class="tag tag-result">Draw</span> ${drawText}`;
  document.getElementById('scoreLine').innerHTML =
    `<span class="tag tag-result">Correct Score</span> ${scoreText}`;
  document.getElementById('activityLine').innerHTML = actLine;
}

/* init */
(function init(){
  const today = new Date().toISOString().split("T")[0];
  document.getElementById('matchDate').value = today;
  autoSetPaksha();
})();
</script>
</body>
</html>
