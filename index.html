<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Astro Football ‚Ä¢ Pure Panchapakshi</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <style>
    :root{
      --t1:#0ea5e9;
      --t2:#22c55e;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:#ffffff;
      color:#111827;
    }
    .wrap{
      max-width:960px;
      margin:0 auto;
      padding:12px;
    }
    h1{
      font-size:18px;
      letter-spacing:.25em;
      text-transform:uppercase;
      color:#4b5563;
      margin:4px 0;
      text-align:center;
    }
    h2{
      font-size:11px;
      font-weight:600;
      letter-spacing:.25em;
      text-transform:uppercase;
      color:#9ca3af;
      margin:0 0 8px 0;
    }
    .sub{
      text-align:center;
      font-size:11px;
      color:#6b7280;
      margin-bottom:10px;
    }
    .card{
      background:#f9fafb;
      border-radius:16px;
      padding:12px;
      margin-bottom:12px;
      border:1px solid #e5e7eb;
      box-shadow:0 8px 18px rgba(15,23,42,0.06);
    }
    label{
      display:block;
      font-size:10px;
      text-transform:uppercase;
      letter-spacing:.18em;
      color:#9ca3af;
      margin-bottom:2px;
    }
    input,select{
      width:100%;
      padding:7px 9px;
      border-radius:10px;
      border:1px solid #d1d5db;
      font-size:13px;
      background:#ffffff;
      color:#111827;
      margin-bottom:8px;
    }
    input:focus,select:focus{
      outline:none;
      border-color:#0ea5e9;
      box-shadow:0 0 0 1px #0ea5e9;
    }
    button{
      border:none;
      border-radius:999px;
      padding:8px 12px;
      font-size:11px;
      font-weight:600;
      letter-spacing:.18em;
      text-transform:uppercase;
      cursor:pointer;
      color:#ffffff;
    }
    .btn-main{
      background:linear-gradient(90deg,#22c55e,#16a34a);
      box-shadow:0 8px 18px rgba(34,197,94,0.45);
      width:100%;
    }
    .btn-sec{
      background:linear-gradient(90deg,#0ea5e9,#6366f1);
      box-shadow:0 8px 18px rgba(14,165,233,0.4);
      width:100%;
    }
    button:active{transform:scale(.97);}
    .row{display:flex;flex-wrap:wrap;gap:8px;}
    .row>div{flex:1;min-width:0;}

    .small{
      font-size:11px;
      color:#6b7280;
      line-height:1.5;
      margin-top:4px;
    }

    table{
      width:100%;
      border-collapse:collapse;
      font-size:11px;
    }
    th,td{
      border:1px solid #e5e7eb;
      padding:4px 6px;
      text-align:left;
      white-space:nowrap;
    }
    th{
      background:#e5f3ff;
      text-transform:uppercase;
      letter-spacing:.08em;
      font-size:10px;
      color:#374151;
      position:sticky;
      top:0;
      z-index:1;
    }
    tr:nth-child(even){background:#ffffff;}
    tr:nth-child(odd){background:#f9fafb;}
    tr.live-row{background:#fef2f2;}
    tr:hover{background:#e0f2fe;cursor:pointer;}

    .matches-wrap{
      max-height:260px;
      overflow-y:auto;
      border-radius:10px;
      border:1px solid #e5e7eb;
      background:#ffffff;
    }

    .tag{
      display:inline-block;
      padding:2px 8px;
      border-radius:999px;
      font-size:10px;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.12em;
      margin-right:4px;
    }
    .tag-live{background:#fee2e2;color:#b91c1c;}
    .tag-info{background:#e0f2fe;color:#0369a1;}
    .tag-day{background:#dbeafe;color:#1d4ed8;}
    .tag-bird{background:#dcfce7;color:#166534;}
    .tag-res{background:#fef3c7;color:#92400e;}

    .dot-live{
      display:inline-block;
      width:7px;
      height:7px;
      border-radius:999px;
      background:#ef4444;
      margin-right:4px;
    }

    .good{color:#16a34a;font-weight:600;}
    .bad{color:#ef4444;font-weight:600;}
    .mid{color:#0ea5e9;font-weight:600;}
    .winner{color:#16a34a;font-weight:700;}
    .team1{color:var(--t1);font-weight:600;}
    .team2{color:var(--t2);font-weight:600;}

    .result-line{
      font-size:11.5px;
      margin:2px 0;
    }
  </style>
</head>
<body>
<div class="wrap">
  <h1>ASTRO FOOTBALL</h1>
  <div class="sub">Pure Panchapakshi ‚Ä¢ Football Only ‚Ä¢ Rule Lock üîí</div>

  <!-- STEP 1: LOAD MATCHES -->
  <div class="card">
    <h2>STEP 1 ¬∑ LOAD FOOTBALL MATCHES (API-FOOTBALL)</h2>
    <div class="row">
      <div>
        <label>API Key (api-football.com)</label>
        <input id="apiKey" placeholder="Paste your API key here">
      </div>
      <div style="flex-basis:130px;max-width:130px;">
        <label>&nbsp;</label>
        <button class="btn-sec" onclick="loadMatches()">LOAD</button>
      </div>
    </div>
    <div class="small">
      <span class="tag tag-info">INFO</span>
      Key is used only in your browser. Shows today
      <span class="mid">LIVE</span> (red dot) + upcoming fixtures.
      Finished matches are removed. Tap a row to send the match into Step 2.
    </div>

    <div class="matches-wrap" id="matchesWrap">
      <table id="matchesTable">
        <thead>
          <tr>
            <th>Kickoff</th>
            <th>Home</th>
            <th>Away</th>
            <th>League</th>
            <th>City / Country</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody id="matchesBody">
          <tr><td colspan="6">Paste API key and click LOAD‚Ä¶</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- STEP 2: MATCH INPUT -->
  <div class="card">
    <h2>STEP 2 ¬∑ MATCH INPUT (AUTO FROM API OR MANUAL)</h2>
    <div class="row">
      <div>
        <label>Home team</label>
        <input id="homeTeam" placeholder="Home team name">
      </div>
      <div>
        <label>Away team</label>
        <input id="awayTeam" placeholder="Away team name">
      </div>
    </div>
    <div class="row">
      <div>
        <label>Kickoff date (venue)</label>
        <input id="kickDate" type="date">
      </div>
      <div>
        <label>Kickoff time (venue local)</label>
        <input id="kickTime" type="time">
      </div>
      <div>
        <label>Venue timezone (from API)</label>
        <input id="venueTz" placeholder="Ex: Europe/London">
      </div>
    </div>
    <div class="small" id="autoInfo">
      Paksha & team birds will be locked automatically from match date + team name (numerology ‚Üí 27 nakshatra ‚Üí bird).
    </div>
  </div>

  <!-- STEP 3: PANCHAPAKSHI RESULT -->
  <div class="card">
    <h2>STEP 3 ¬∑ PURE PANCHAPAKSHI PREDICTION (AUTO LOCK)</h2>
    <div class="row">
      <div>
        <button class="btn-main" onclick="runPanchapakshi()">RUN PANCHAPAKSHI PREDICTION</button>
      </div>
    </div>

    <div id="resultArea" class="small" style="margin-top:10px;">
      Waiting for match input‚Ä¶
    </div>
  </div>
</div>

<script>
/* ------------ NUMEROLOGY ‚Üí 27 NAKSHATRA ‚Üí BIRD (TEAM) -------------- */

// Pythagorean numerology mapping
const NUM_TABLE = {
  A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,
  J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,
  S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8
};

// 27 nakshatra ‚Üí Panchapakshi bird
const NAK_BIRDS = [
  'Peacock','Peacock','Peacock','Peacock','Peacock',       // 1-5
  'Cock','Cock','Cock','Cock','Cock','Cock',              // 6-11
  'Crow','Crow','Crow','Crow','Crow',                     // 12-16
  'Owl','Owl','Owl','Owl','Owl',                          // 17-21
  'Vulture','Vulture','Vulture','Vulture','Vulture','Vulture' // 22-27
];

function teamNameToNumber(name){
  let s = 0;
  const up = name.toUpperCase();
  for(const ch of up){
    if(NUM_TABLE[ch]) s += NUM_TABLE[ch];
  }
  if(s === 0) return 1;
  while(s > 9){
    let t = 0;
    for(const c of String(s)) t += Number(c);
    s = t;
  }
  return s; // 1..9
}

function teamNameToNakIndex(name){
  const n = teamNameToNumber(name); // 1..9
  // spread 9 numbers into 27 stars: each gets 3
  // index 0..26
  const idx = (n - 1) * 3; // 0,3,6,...24
  return idx;              // choose first star in that block
}

function teamNameToBird(name){
  const idx = teamNameToNakIndex(name);
  return NAK_BIRDS[idx] || 'Peacock';
}

/* ------------ PANCHAPAKSHI DAY BIRD + ACTIVITY ENGINE -------------- */

const BIRDS = ['Vulture','Owl','Crow','Cock','Peacock'];
const DAY_PLANETS = ['Sun','Moon','Mars','Mercury','Jupiter','Venus','Saturn'];

const BIRD_PLANETS = {
  shukla: {
    Vulture:['Jupiter','Saturn'],
    Owl:['Sun','Venus'],
    Crow:['Moon'],
    Cock:['Mars'],
    Peacock:['Mercury']
  },
  krishna: {
    Vulture:['Mars'],
    Owl:['Moon'],
    Crow:['Sun'],
    Cock:['Jupiter','Saturn'],
    Peacock:['Mercury','Venus']
  }
};

function deriveRulingBirds(paksha){
  const map = BIRD_PLANETS[paksha];
  const arr = [];
  for(let d=0;d<7;d++){
    const planet = DAY_PLANETS[d];
    let chosen = 'Vulture';
    for(const b of BIRDS){
      if((map[b]||[]).includes(planet)){ chosen = b; break; }
    }
    arr.push(chosen);
  }
  return arr;
}

const RULING_BIRDS = {
  shukla: deriveRulingBirds('shukla'),
  krishna: deriveRulingBirds('krishna')
};

// friendly / enemy for synergy
const FRIENDLY = {
  Vulture:['Owl','Cock'],
  Owl:['Vulture','Peacock'],
  Crow:['Peacock','Cock'],
  Cock:['Vulture','Crow'],
  Peacock:['Owl','Crow']
};
const ENEMY = {
  Vulture:['Peacock','Crow'],
  Owl:['Crow','Cock'],
  Crow:['Vulture','Owl'],
  Cock:['Peacock','Owl'],
  Peacock:['Vulture','Cock']
};

// Apahara durations in minutes
const APAHARA_DURATIONS = { Rule:48, Eat:30, Walk:36, Sleep:30, Die:36 };
// Activity scores (user rule)
const ACTIVITY_SCORES = { Rule:100, Eat:80, Walk:50, Sleep:30, Die:0 };

// day / night cycles
const ACTIVITY_CYCLES = {
  shukla_day:['Eat','Walk','Rule','Sleep','Die'],
  shukla_night:['Eat','Rule','Die','Walk','Sleep'],
  krishna_day:['Eat','Die','Sleep','Rule','Walk'],
  krishna_night:['Eat','Sleep','Walk','Die','Rule']
};

// return {activity:'Rule'|'Eat'|...}
function getActivityAtTime(bird, minutes, dayIdx, paksha){
  // 0..1439 IST-style simple day: 06:00-18:00 day, else night
  let t = minutes;
  const dayStart = 6*60;
  const nightStart = 18*60;
  if(t < dayStart) t += 1440; // after midnight

  let isNight, minsSince, cycleStart;
  if(t >= dayStart && t < nightStart){
    isNight = false;
    minsSince = t - dayStart;
    cycleStart = dayStart;
  }else{
    isNight = true;
    if(t >= nightStart){
      minsSince = t - nightStart;
      cycleStart = nightStart;
    }else{
      minsSince = (t+1440) - nightStart;
      cycleStart = nightStart;
    }
  }
  const yamaDuration = 144; // 2h24m
  const yamaIndex = Math.floor(minsSince / yamaDuration);
  const clamped = Math.min(yamaIndex,4);
  const key = paksha + '_' + (isNight ? 'night':'day');
  const cycle = ACTIVITY_CYCLES[key];
  const ruling = RULING_BIRDS[paksha][dayIdx];

  const bi = BIRDS.indexOf(bird);
  const ri = BIRDS.indexOf(ruling);
  const dist = (bi - ri + 5) % 5;
  const actIdx = (clamped + dist) % 5;
  const mainActivity = cycle[actIdx];

  // break main activity into 5 sub apaharas starting at cycleStart + clamped*yamaDuration
  // then pick sub covering "minutes"
  let start = cycleStart + clamped*yamaDuration;
  const order = ['Rule','Eat','Walk','Sleep','Die']; // inner order
  let cur = start;
  for(const a of order){
    const dur = APAHARA_DURATIONS[a];
    const s = cur;
    const e = cur + dur;
    if(minutes >= s && minutes < e){
      return {activity:a};
    }
    cur = e;
  }
  // fallback
  return {activity:mainActivity};
}

/* ------------ MOON AGE ‚Üí AUTO PAKSHA (SHUKLA / KRISHNA) -------------- */

function moonAge(date){
  const year = date.getUTCFullYear();
  const month = date.getUTCMonth() + 1;
  const day = date.getUTCDate();
  let yy = year - Math.floor((12 - month)/10);
  let mm = month + 9;
  if(mm >= 12) mm -= 12;
  const k1 = Math.floor(365.25*(yy+4712));
  const k2 = Math.floor(30.6*mm + 0.5);
  const k3 = Math.floor(Math.floor((yy/100)+49)*0.75) - 38;
  const jd = k1 + k2 + day + 59 - k3;
  const ip = (jd - 2451550.1)/29.530588853;
  const frac = ip - Math.floor(ip);
  return frac*29.530588853; // 0..29.53
}

function pakshaFromDateStr(dateStr){
  if(!dateStr) return 'shukla';
  const d = new Date(dateStr+'T00:00:00Z');
  const age = moonAge(d);
  return age < 14.765 ? 'shukla' : 'krishna';
}

/* ------------ SCORE + RESULT HELPERS -------------- */

function teamScore(bird, rulingBird, activity){
  let base = ACTIVITY_SCORES[activity] || 0;
  if(bird === rulingBird) base += 10;
  if((FRIENDLY[rulingBird]||[]).includes(bird)) base += 5;
  if((ENEMY[rulingBird]||[]).includes(bird)) base -= 10;
  if(base < 0) base = 0;
  if(base > 110) base = 110;
  return base;
}

function guessGoals(activity, advantageSign){
  let g = 0;
  if(activity === 'Rule') g = 3;
  else if(activity === 'Eat') g = 2;
  else if(activity === 'Walk') g = 1;
  else if(activity === 'Sleep') g = 1;
  else g = 0;
  if(advantageSign > 0) g += 1;
  if(advantageSign < 0 && g > 0) g -= 1;
  if(g < 0) g = 0;
  if(g > 5) g = 5;
  return g;
}

/* ------------ STEP 3: RUN PREDICTION -------------- */

function runPanchapakshi(){
  const home = document.getElementById('homeTeam').value.trim();
  const away = document.getElementById('awayTeam').value.trim();
  const dateStr = document.getElementById('kickDate').value;
  const timeStr = document.getElementById('kickTime').value;
  const resEl = document.getElementById('resultArea');

  if(!home || !away){
    alert("Enter home + away team (or click a match row in Step 1).");
    return;
  }
  if(!dateStr || !timeStr){
    alert("Enter kickoff date & time.");
    return;
  }

  const paksha = pakshaFromDateStr(dateStr);
  const pakshaLabel = paksha === 'shukla' ? 'Shukla (Waxing)' : 'Krishna (Waning)';

  const d = new Date(dateStr);
  const dayIdx = d.getDay(); // 0=Sun
  const rulingBird = RULING_BIRDS[paksha][dayIdx];

  const [hStr,mStr] = timeStr.split(':');
  const mins = parseInt(hStr,10)*60 + parseInt(mStr,10);

  const homeBird = teamNameToBird(home);
  const awayBird = teamNameToBird(away);

  const actHome = getActivityAtTime(homeBird, mins, dayIdx, paksha).activity;
  const actAway = getActivityAtTime(awayBird, mins, dayIdx, paksha).activity;

  const sHome = teamScore(homeBird, rulingBird, actHome);
  const sAway = teamScore(awayBird, rulingBird, actAway);

  let winnerText = 'Balanced / 50-50';
  let drawYes = 'Yes';
  const diff = Math.abs(sHome - sAway);

  if(diff >= 8){
    drawYes = 'No';
    winnerText = sHome > sAway ? home : away;
  }

  const advSignHome = sHome === sAway ? 0 : (sHome > sAway ? 1 : -1);
  const advSignAway = -advSignHome;

  const gHome = guessGoals(actHome, advSignHome);
  const gAway = guessGoals(actAway, advSignAway);

  const drawText = (gHome === gAway) ? 'Yes (scoreline level)' : drawYes;

  const dateNice = dateStr.split('-').reverse().join('-');

  resEl.innerHTML =
    `<div class="result-line">
       <span class="tag tag-day">DAY</span>
       Match date: <b>${dateNice}</b> ‚Ä¢ Paksha auto: <b>${pakshaLabel}</b> ‚Ä¢
       Ruling bird: <span class="good">${rulingBird}</span>
     </div>
     <div class="result-line">
       <span class="tag tag-bird">TEAM BIRDS (LOCKED)</span>
       <span class="team1">${home}</span> ‚Üí <b>${homeBird}</b> ‚Ä¢
       <span class="team2">${away}</span> ‚Üí <b>${awayBird}</b>
     </div>
     <div class="result-line">
       <span class="tag tag-info">KICKOFF</span>
       Local time: <b>${timeStr}</b> ‚Ä¢ Activity ‚Üí
       <span class="team1">${home}</span>:
       <span class="mid">${actHome}</span>,
       score <b>${sHome}</b> ‚Ä¢
       <span class="team2">${away}</span>:
       <span class="mid">${actAway}</span>,
       score <b>${sAway}</b>
     </div>
     <div class="result-line">
       <span class="tag tag-res">OVERALL</span>
       Overall Winner: <span class="winner">${winnerText}</span> üèÜ
       &nbsp; | &nbsp; Draw: <b>${drawText}</b>
     </div>
     <div class="result-line">
       <span class="tag tag-res">CORRECT SCORE LOCK</span>
       Predicted score (home-away):
       <span class="team1">${home}</span> <b>${gHome}</b> ‚Äì 
       <span class="team2">${away}</span> <b>${gAway}</b>
     </div>
     <div class="small" style="margin-top:6px;">
       Rule = 100, Eat = 80, Walk = 50, Sleep = 30, Die = 0.
       Pure Panchapakshi engine ‚Äì no cricket, no extra systems.
     </div>`;

  // update auto info line
  document.getElementById('autoInfo').innerHTML =
    `Auto lock: Paksha = <b>${pakshaLabel}</b>, 
     Home bird = <b>${homeBird}</b>, Away bird = <b>${awayBird}</b>
     (team name numerology ‚Üí 27 nakshatra ‚Üí bird).`;
}

/* ------------ STEP 1: API-FOOTBALL MATCHES -------------- */

function minsToHM(dateStr){
  const d = new Date(dateStr);
  const h = String(d.getHours()).padStart(2,'0');
  const m = String(d.getMinutes()).padStart(2,'0');
  return `${h}:${m}`;
}

async function loadMatches(){
  const key = document.getElementById('apiKey').value.trim();
  if(!key){
    alert("Paste your API key from api-football.com");
    return;
  }

  const headers = { 'x-apisports-key': key };

  const today = new Date();
  const y = today.getFullYear();
  const m = String(today.getMonth()+1).padStart(2,'0');
  const d = String(today.getDate()).padStart(2,'0');
  const dateStr = `${y}-${m}-${d}`;

  const upcomingUrl = `https://v3.football.api-sports.io/fixtures?date=${dateStr}`;
  const liveUrl     = `https://v3.football.api-sports.io/fixtures?live=all`;

  const bodyEl = document.getElementById('matchesBody');
  bodyEl.innerHTML = `<tr><td colspan="6">Loading from API-FOOTBALL‚Ä¶</td></tr>`;

  let upcoming = [];
  let live = [];

  try{
    // upcoming
    const upRes = await fetch(upcomingUrl,{headers});
    if(!upRes.ok){
      let msg = `HTTP ${upRes.status}`;
      try{
        const body = await upRes.json();
        if(body && body.errors && Object.keys(body.errors).length){
          msg += " ‚Äì " + Object.values(body.errors).join(" / ");
        }else if(body && body.message){
          msg += " ‚Äì " + body.message;
        }
      }catch(e){}
      alert("Upcoming fixtures error ‚Äì " + msg +
            "\n\nCheck key & daily quota in api-football.com ‚Üí My Access.");
      bodyEl.innerHTML = `<tr><td colspan="6">No data (upcoming error).</td></tr>`;
      return;
    }
    const upData = await upRes.json();
    upcoming = upData.response || [];

    // live (optional)
    try{
      const liveRes = await fetch(liveUrl,{headers});
      if(liveRes.ok){
        const liveData = await liveRes.json();
        live = liveData.response || [];
      }else{
        console.warn("Live fixtures error:",liveRes.status);
      }
    }catch(e2){
      console.warn("Live fetch error",e2);
    }

    // merge live + upcoming, remove finished
    const map = new Map();
    [...live,...upcoming].forEach(f => map.set(f.fixture.id,f));
    let fixtures = Array.from(map.values());

    const liveCodes = ['1H','2H','ET','BT','P','INT'];
    const badCodes  = ['FT','AET','PEN','PST','CANC','ABD','AWD','WO'];

    fixtures = fixtures.filter(f => {
      const s = (f.fixture.status && f.fixture.status.short) || 'NS';
      if(badCodes.includes(s)) return false; // finished / cancelled off
      return true;
    });

    fixtures.sort((a,b) => new Date(a.fixture.date) - new Date(b.fixture.date));

    if(!fixtures.length){
      bodyEl.innerHTML = `<tr><td colspan="6">No LIVE / upcoming matches today.</td></tr>`;
      return;
    }

    bodyEl.innerHTML = '';
    fixtures.forEach(f => {
      const tr = document.createElement('tr');
      const status = (f.fixture.status && f.fixture.status.short) || 'NS';
      const isLive = liveCodes.includes(status);

      if(isLive) tr.classList.add('live-row');

      const koDate = new Date(f.fixture.date);
      const koStr = `${String(koDate.getDate()).padStart(2,'0')}-${String(koDate.getMonth()+1).padStart(2,'0')} ${minsToHM(f.fixture.date)}`;

      const league = (f.league && f.league.name) || '';
      const city = (f.fixture && f.fixture.venue && f.fixture.venue.city) || '';
      const country = (f.league && f.league.country) || '';
      const cityCountry = [city,country].filter(Boolean).join(', ');

      tr.innerHTML =
        `<td>${koStr}</td>
         <td>${f.teams.home.name}</td>
         <td>${f.teams.away.name}</td>
         <td>${league}</td>
         <td>${cityCountry}</td>
         <td>${isLive ? '<span class="dot-live"></span>LIVE' : status}</td>`;

      tr.addEventListener('click', () => {
        const home = f.teams.home.name;
        const away = f.teams.away.name;
        document.documentElement.style.setProperty('--t1','#0ea5e9');
        document.documentElement.style.setProperty('--t2','#22c55e');
        document.getElementById('homeTeam').value = home;
        document.getElementById('awayTeam').value = away;

        const dIso = f.fixture.date; // ISO
        const dObj = new Date(dIso);
        const yyyy = dObj.getFullYear();
        const mm = String(dObj.getMonth()+1).padStart(2,'0');
        const dd = String(dObj.getDate()).padStart(2,'0');
        const hh = String(dObj.getHours()).padStart(2,'0');
        const mi = String(dObj.getMinutes()).padStart(2,'0');
        document.getElementById('kickDate').value = `${yyyy}-${mm}-${dd}`;
        document.getElementById('kickTime').value = `${hh}:${mi}`;
        document.getElementById('venueTz').value = f.fixture.timezone || '';

        document.getElementById('resultArea').innerHTML =
          `Match selected: <span class="team1">${home}</span> vs
           <span class="team2">${away}</span>, kickoff ${hh}:${mi} (${f.fixture.timezone || 'venue timezone'}).
           Now press ‚ÄúRUN PANCHAPAKSHI PREDICTION‚Äù.`;

        window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});
      });

      bodyEl.appendChild(tr);
    });

  }catch(e){
    console.error(e);
    alert("Network / API error. Check internet + key / quota.");
    bodyEl.innerHTML = `<tr><td colspan="6">API error ‚Äì see console.</td></tr>`;
  }
}

/* ------------ INIT: set today date -------------- */

(function init(){
  const today = new Date();
  const yyyy = today.getFullYear();
  const mm = String(today.getMonth()+1).padStart(2,'0');
  const dd = String(today.getDate()).padStart(2,'0');
  document.getElementById('kickDate').value = `${yyyy}-${mm}-${dd}`;
})();
</script>
</body>
</html>
